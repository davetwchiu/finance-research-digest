<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <title>Breaking Alerts</title>
  <style>
    body{font-family:-apple-system,Segoe UI,Roboto,sans-serif;margin:24px;background:#0c1330;color:#e8ecff;line-height:1.5}
    a{color:#9bb8ff}
    li{margin:10px 0}
    .muted{color:#a7b0d6}
  </style>
</head>
<body>
  <h1>Breaking Alerts Timeline</h1>
  <p class='muted'>Material alerts are archived here. If a link is missing, refresh in 1–2 minutes (GitHub Pages cache/build delay).</p>

  <h2 style='font-size:18px'>All breaking notes</h2>
  <ul id='breakingList'>
    <li class='muted'>Loading timeline...</li>
  </ul>

<script>
async function loadBreaking(){
  try{
    const iRes = await fetch('./breaking_index.json?ts='+Date.now(), {cache:'no-store'});
    if(!iRes.ok) throw new Error('missing manifest');
    const idx = await iRes.json();

    const ul = document.getElementById('breakingList');
    ul.innerHTML = '';
    (idx.items || []).forEach(it => {
      const li = document.createElement('li');
      const a = document.createElement('a');
      a.href = it.path;
      a.textContent = `${it.time} — ${it.title}`;
      li.appendChild(a);
      ul.appendChild(li);
    });
    const back = document.createElement('li');
    const backA = document.createElement('a');
    backA.href='../../index.html'; backA.textContent='← Back to toolbox';
    back.appendChild(backA); ul.appendChild(back);
  }catch{
    const ul = document.getElementById('breakingList');
    ul.innerHTML = '<li class="muted">No timeline manifest yet.</li><li><a href="../../index.html">← Back to toolbox</a></li>';
  }
}
loadBreaking();
</script>
</body>
</html>